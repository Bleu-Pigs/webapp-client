<template>
  <div class="AuthenticateViewPluginDownload" ref="el">
    <div class="topNav">
      <div class="helpLink">
        <h1>Need help? <b>Join us on Discord</b></h1>
      </div>
    </div>
    <div class="childWrapper">
      <div class="container">
        <div class="header">
          <h1 class="headerComponent utility-opacity-zero">Hello <span>Z_V</span>, welcome to <b>Bleu Pigs!</b></h1>
          <h2 class="headerComponent utility-opacity-zero">
            To run private Modules within the SB you can upload them to the BleuPigs Roblox account,
            this is done through a Studio Plugin which you may download and configure.
          </h2>
        </div>
        <div class="body">
          <div class="card utility-opacity-zero">
            <div class="iconContainer">
              <div class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
                     class="pluginDownload">
                  <g>
                    <path fill="currentColor"
                          d="M320 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3a19.37 19.37 0 0 1-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24a23.94 23.94 0 0 1 24-24h80a23.94 23.94 0 0 1 24 24z"
                          class="secondary"></path>
                    <path fill="currentColor"
                          d="M488 352H341.3l-49 49a51.24 51.24 0 0 1-72.6 0l-49-49H24a23.94 23.94 0 0 0-24 24v112a23.94 23.94 0 0 0 24 24h464a23.94 23.94 0 0 0 24-24V376a23.94 23.94 0 0 0-24-24zm-120 96a16 16 0 1 1 16-16 16 16 0 0 1-16 16zm64 0a16 16 0 1 1 16-16 16 16 0 0 1-16 16z"
                          class="primary"></path>
                  </g>
                </svg>
              </div>
            </div>
            <div class="mainContainer">
              <div class="cardContainerBody">
                <div class="cardText">
                  <h1>Download plugin</h1>
                  <h2>You must manually copy it to the Studio folder</h2>
                </div>
                <div class="cardArrow">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="nextArrow">
                    <g>
                      <path fill="currentColor"
                            d="M24 215h286.4l41.6 41-41.59 41H24c-13.3 0-24-11-24-24.63v-32.82A24.22 24.22 0 0 1 24 215z"
                            class="secondary"></path>
                      <path fill="currentColor"
                            d="M246.31 38.52c.24.23.48.47.71.71L441 238.56a25 25 0 0 1 0 34.78L247 472.77a23.38 23.38 0 0 1-33.11.7c-.24-.22-.47-.46-.7-.7L191.06 450a25.13 25.13 0 0 1 .4-35.18L352.19 256 191.46 97.2a24.94 24.94 0 0 1-.4-35.18l22.15-22.78a23.38 23.38 0 0 1 33.1-.72z"
                            class="primary"></path>
                    </g>
                  </svg>
                </div>
              </div>
            </div>
          </div>

          <div class="card utility-opacity-zero">
            <div class="iconContainer">
              <div class="icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="continue">
                  <g>
                    <path fill="currentColor"
                          d="M636.3 388.2l-25.8-14.9a117.31 117.31 0 0 0 0-42.6l25.8-14.9a7.24 7.24 0 0 0 3.3-8.5 150.07 150.07 0 0 0-33.2-57.4 7.29 7.29 0 0 0-9-1.4l-25.8 14.9a117.4 117.4 0 0 0-36.9-21.3v-29.8a7.28 7.28 0 0 0-5.7-7.1 150.88 150.88 0 0 0-66.2 0 7.28 7.28 0 0 0-5.7 7.1v29.8a117.4 117.4 0 0 0-36.9 21.3l-25.8-14.9a7.31 7.31 0 0 0-9 1.4 150.07 150.07 0 0 0-33.2 57.4 7.37 7.37 0 0 0 3.3 8.5l25.8 14.9a117.31 117.31 0 0 0 0 42.6l-25.8 14.9a7.24 7.24 0 0 0-3.3 8.5 150.82 150.82 0 0 0 33.2 57.4 7.29 7.29 0 0 0 9 1.4l25.8-14.9a117.4 117.4 0 0 0 36.9 21.3v29.8a7.28 7.28 0 0 0 5.7 7.1 150.88 150.88 0 0 0 66.2 0 7.28 7.28 0 0 0 5.7-7.1v-29.8a117.4 117.4 0 0 0 36.9-21.3l25.8 14.9a7.31 7.31 0 0 0 9-1.4 150.07 150.07 0 0 0 33.2-57.4 7.37 7.37 0 0 0-3.3-8.5zM496 400.5a48.5 48.5 0 1 1 48.5-48.5 48.55 48.55 0 0 1-48.5 48.5z"
                          class="secondary"></path>
                    <path fill="currentColor"
                          d="M425.2 491.7v-9.2c-2.3-1.2-4.6-2.6-6.8-3.9l-7.9 4.6a39.23 39.23 0 0 1-48.5-7.3 182.34 182.34 0 0 1-40.2-69.6 39.11 39.11 0 0 1 17.9-45.7l7.9-4.6q-.15-3.9 0-7.8l-7.9-4.6a39.07 39.07 0 0 1-17.9-45.7c.9-2.9 2.2-5.8 3.2-8.7-3.8-.3-7.5-1.2-11.4-1.2h-16.7a174.08 174.08 0 0 1-145.8 0h-16.7A134.43 134.43 0 0 0 0 422.4V464a48 48 0 0 0 48 48h352a47.94 47.94 0 0 0 27.2-8.5 39 39 0 0 1-2-11.8zM224 256A128 128 0 1 0 96 128a128 128 0 0 0 128 128z"
                          class="primary"></path>
                  </g>
                </svg>
              </div>
            </div>
            <div class="mainContainer">
              <div class="cardContainerBody">
                <div class="cardText">
                  <h1>Skip</h1>
                  <h2>Continue to your account and setup the plugin later</h2>
                </div>
                <div class="cardArrow">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="nextArrow">
                    <g>
                      <path fill="currentColor"
                            d="M24 215h286.4l41.6 41-41.59 41H24c-13.3 0-24-11-24-24.63v-32.82A24.22 24.22 0 0 1 24 215z"
                            class="secondary"></path>
                      <path fill="currentColor"
                            d="M246.31 38.52c.24.23.48.47.71.71L441 238.56a25 25 0 0 1 0 34.78L247 472.77a23.38 23.38 0 0 1-33.11.7c-.24-.22-.47-.46-.7-.7L191.06 450a25.13 25.13 0 0 1 .4-35.18L352.19 256 191.46 97.2a24.94 24.94 0 0 1-.4-35.18l22.15-22.78a23.38 23.38 0 0 1 33.1-.72z"
                            class="primary"></path>
                    </g>
                  </svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script lang="ts">
  import {Component, Vue} from 'vue-property-decorator';
  import router from "@/router";
  import animate from "animejs";

  Component.registerHooks([
    'beforeRouteEnter',
    'beforeRouteUpdate',
    'beforeRouteLeave'
  ]);

  @Component({
    components: {
      Vue
    }
  })

  export default class AuthenticateViewPluginDownload extends Vue {
    mounted() {
      setTimeout(this.routeEnterGuard, 50);
    }

    private elementCollection = () => {
      let el = <HTMLElement>this.$refs.el;
      return {
        helpLink: el.querySelectorAll(".topNav .helpLink h1"),
        headers: el.querySelectorAll(".childWrapper .container .header .headerComponent"),
        cards: el.querySelectorAll(".childWrapper .body .card")
      };
    };

    public routeEnterGuard = (): void => {
      let elementCollection = this.elementCollection();
      let animationTimeline = animate.timeline()
        .add({
          targets: [elementCollection.headers],
          opacity: [0, 1],
          translateY: ["-5px", "0px"],
          easing: "cubicBezier(.5, .05, .1, .3)",
          duration: 200
        })
        .add({
          targets: elementCollection.cards,
          opacity: [0, 1],
          translateY: ["5px", "0px"],
          easing: "cubicBezier(.5, .05, .1, .3)",
          duration: 200
        }, 0);

      animationTimeline.play();
    };

    public routeLeaveGuard = (callback: Function): void => {
      let elementCollection = this.elementCollection();
      let animationTimeline = animate.timeline()
        .add({
          targets: [elementCollection.headers],
          opacity: 0,
          translateY: "-5px",
          easing: "cubicBezier(.5, .05, .1, .3)",
          duration: 200
        })
        .add({
          targets: elementCollection.cards,
          opacity: 0,
          translateY: "5px",
          easing: "cubicBezier(.5, .05, .1, .3)",
          duration: 200,
          complete: () => callback()
        }, 0);

      animationTimeline.play()
    };

    beforeRouteLeave(to: Vue, from: Vue, next: any) {
      return this.routeLeaveGuard(next);
    }
  };
</script>

<style lang="stylus" scoped>
  @import "~@/assets/config/config.styl"

  .utility-opacity-zero
    opacity: 0

  .AuthenticateViewPluginDownload
    height: 100vh
    background: #F5F6F9
    display: grid
    grid-template-rows: 100px 1fr
    grid-template-columns: 1fr

    .topNav
      display: flex
      justify-content flex-end
      align-items: center
      width: 100%

      .helpLink
        height: 100%
        margin-right: 60px
        display: flex
        align-items: center

        h1
          font-weight: 500
          font-size: 16px
          font-family: 'Poppins', sans-serif
          color: lighten(#6F727E, 40%)

          b
            color: $colours.blue.bp

    .childWrapper
      display: flex
      justify-content: center
      align-items: center

      .container
        width: 65%
        height: 80%
        display: flex
        flex-direction: column

        .header
          width: 100%

          h1
            font-weight: 500
            font-size: 30px
            font-family: 'Poppins', sans-serif
            color: #6F727E

            b
              font-weight: 600
              color: darken(@color, 5%)

            span
              color: $colours.blue.bp

          h2
            font-weight: 500
            font-size: 20px
            font-family: 'Poppins', sans-serif
            color: #A4A5A8

        .body
          display: flex
          flex-direction: row
          margin-top: 50px

          .card
            height: 350px
            width: 300px
            background: #ffffff
            border-radius: 15px
            display: grid
            grid-template-columns: 1fr
            grid-template-rows: 1fr 0.5fr
            box-shadow: 0 10px 18px rgba(0, 0, 0, 0.1), 0 5px 5px rgba(0, 0, 0, 0.1);
            border: 1.4px solid rgba($colours.blue.bp, 0)
            transition: background 400ms cubic-bezier(0, .8, .13, 1)

            &:hover
              border: 1.4px solid rgba($colours.blue.bp, 0.75)
              cursor: pointer

              .mainContainer
                .cardContainerBody
                  .cardArrow
                    .nextArrow
                      transform: translateX(0px)
                      opacity: 1

                  .cardText
                    h1
                      color: #6F727E

                    h2
                      color: lighten(#6F727E, 10%)

              .iconContainer
                .icon
                  border: 1.4px solid rgba($colours.blue.bp, 0)
                  background: $colours.blue.bp
                  box-shadow: 0 10px 18px rgba($colours.blue.bp, 0.1), 0 5px 5px rgba($colours.blue.bp, 0.1);

                  .pluginDownload
                  .continue
                    .primary
                      fill: $colours.grey.g0

                    .secondary
                      fill: $colours.grey.g0
                      opacity: 0.5

            &:nth-child(n+2)
              margin-left: 40px

            .mainContainer
              display: flex
              align-items: center

              .cardContainerBody
                height: 100%
                width: 100%
                display: grid
                grid-template-rows: 1fr 40px

                .cardArrow
                  display: flex
                  align-items: flex-start
                  justify-content: center

                  .nextArrow
                    width: 20px
                    opacity: 0
                    transform: translateX(-10px)
                    transition: opacity 400ms cubic-bezier(0, .8, .13, 1),
                      transform 400ms cubic-bezier(0, .8, .13, 1)

                    .primary
                      fill: $colours.blue.bp
                      transition: fill 400ms cubic-bezier(0, .8, .13, 1)

                    .secondary
                      fill: $colours.blue.bp
                      transition: fill 400ms cubic-bezier(0, .8, .13, 1)

                .cardText
                  display: flex
                  justify-content: center
                  align-items: center
                  flex-direction: column

                  h2
                    font-family: 'Poppins', sans-serif
                    font-weight: 400
                    font-size: 16px
                    color: lighten(#6F727E, 40%)
                    margin-top: 5px
                    transition: color 400ms cubic-bezier(0, .8, .13, 1)
                    padding-left: 20px
                    padding-right: @padding-left
                    text-align: center

                  h1
                    font-weight: 500
                    font-size: 20px
                    font-family: 'Poppins', sans-serif
                    color: lighten(#6F727E, 30%)
                    text-transform: uppercase
                    margin: 0
                    transition: color 400ms cubic-bezier(0, .8, .13, 1)

            .iconContainer
              display: flex
              justify-content: center
              align-items: center
              padding: 40px

              .icon
                border-radius: 10px
                border: 1.4px solid rgba($colours.blue.bp, 0.4)
                width: 100%
                height: 100%
                display: flex
                justify-content: center
                align-items: center
                transition: background 400ms cubic-bezier(0, .8, .13, 1)

                img
                  width: 100%
                  height: 100%
                  object-fit: contain
                  border-radius: 10%

                .pluginDownload
                .continue
                  width: 30%
                  transition: box-shadow 400ms cubic-bezier(0, .8, .13, 1)

                  .primary
                    fill: $colours.blue.bp
                    transition: fill 400ms cubic-bezier(0, .8, .13, 1)

                  .secondary
                    fill: $colours.blue.bp
                    opacity: 0.5
                    transition: fill 400ms cubic-bezier(0, .8, .13, 1)

                .continue
                  // The user account icon is slightly smaller
                  width: 35%
                  transform: translate(10px, 3px)

</style>
